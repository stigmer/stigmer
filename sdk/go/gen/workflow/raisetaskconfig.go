// Code generated by stigmer-codegen. DO NOT EDIT.
// Source: raisetaskconfig.go
// Generated: 2026-01-24T10:43:44+05:30

package workflow

import (
	"google.golang.org/protobuf/types/known/structpb"
)

// RaiseTaskConfig defines the configuration for RAISE tasks.
//
//	RAISE tasks raise errors/exceptions, terminating workflow execution.
//
//	YAML Example:
//	  - taskName:
//	      raise:
//	        error: ValidationError
//	        message: ${ .errorMessage }
//
//	Reference: zigflow-dsl-pattern-catalog.md - Task Type 11
type RaiseTaskConfig struct {
	// Error type/name.
	Error interface{} `json:"error,omitempty"`
	// Error message.  Can contain expressions: "${ .errorMessage }"
	Message interface{} `json:"message,omitempty"`
}

// IsTaskConfig marks RaiseTaskConfig as a TaskConfig implementation.
func (c *RaiseTaskConfig) IsTaskConfig() {}

// ToProto converts RaiseTaskConfig to google.protobuf.Struct for proto marshaling.
func (c *RaiseTaskConfig) ToProto() (*structpb.Struct, error) {
	data := make(map[string]interface{})

	if !isEmpty(c.Error) {
		// Smart conversion: accepts string or TaskFieldRef
		data["error"] = coerceToString(c.Error)
	}
	if !isEmpty(c.Message) {
		// Smart conversion: accepts string or TaskFieldRef
		data["message"] = coerceToString(c.Message)
	}

	return structpb.NewStruct(data)
}

// FromProto converts google.protobuf.Struct to RaiseTaskConfig.
func (c *RaiseTaskConfig) FromProto(s *structpb.Struct) error {
	fields := s.GetFields()

	if val, ok := fields["error"]; ok {
		c.Error = val.GetStringValue()
	}

	if val, ok := fields["message"]; ok {
		c.Message = val.GetStringValue()
	}

	return nil
}
