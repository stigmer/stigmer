// Code generated by stigmer-codegen. DO NOT EDIT.
// Generated: 2026-01-26T03:24:19+05:30

package workflow

import (
	"fmt"
	"reflect"
)

// isEmpty checks if a value is empty/zero.
// Used by ToProto methods to skip optional fields.
func isEmpty(v interface{}) bool {
	if v == nil {
		return true
	}
	val := reflect.ValueOf(v)
	return val.IsZero()
}

// coerceToString converts various types to strings for expression support.
// Used by option functions to accept both string literals and expressions.
func coerceToString(value interface{}) string {
	if s, ok := value.(string); ok {
		return s
	}
	// NOTE: *Task handling omitted to avoid circular dependency between gen/workflow and workflow packages.
	// Task-to-expression conversion is handled in the hand-written workflow package helpers.
	// Handle StringRef - use Value() for resolved literals, Expression() for computed
	if sr, ok := value.(interface {
		Value() string
		Expression() string
	}); ok {
		// Try Value() first (for resolved StringRef from Concat, etc.)
		if v := sr.Value(); v != "" {
			return v
		}
		// Fall back to Expression() for computed/context refs
		return sr.Expression()
	}
	// Handle TaskFieldRef and other expression types
	if expr, ok := value.(interface{ Expression() string }); ok {
		return expr.Expression()
	}
	return fmt.Sprintf("%v", value)
}
