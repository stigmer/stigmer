syntax = "proto3";

package ai.stigmer.commons.apiresource;

import "ai/stigmer/commons/apiresource/enum.proto";
import "buf/validate/validate.proto";

// ApiResourceMetadata contains standard metadata for all API resources.
message ApiResourceMetadata {
  // Human-readable name of the resource.
  string name = 1;

  // URL-friendly identifier, unique within scope.
  string slug = 2;

  // System-generated unique identifier.
  string id = 3;

  // Organization to which this resource belongs.
  // In Local Mode: This is ignored (or defaults to "default").
  // In Cloud Mode: This is enforced by the Authorization Service.
  string org = 4;

  // Owner scope determines visibility and access control for this resource.
  // Defines who can see and access this resource.
  // In Local Mode: Defaults to identity_account or platform (depending on resource).
  // In Cloud Mode: Critical for RBAC.
  // Default: organization (set by middleware in Cloud Mode).
  ApiResourceOwnerScope owner_scope = 5 [(buf.validate.field).enum.defined_only = true];

  // Key-value labels for organization and filtering.
  map<string, string> labels = 6;

  // Key-value annotations for additional metadata.
  map<string, string> annotations = 7;

  // Tags for categorization.
  repeated string tags = 8;

  // Version information for the resource.
  ApiResourceMetadataVersion version = 9;
}

// ApiResourceMetadataVersion contains version tracking information.
message ApiResourceMetadataVersion {
  // Unique identifier for this version.
  string id = 1;

  // Message describing what changed in this version.
  string message = 2;

  // Reference to the previous version ID.
  string previous_version_id = 3;
}
